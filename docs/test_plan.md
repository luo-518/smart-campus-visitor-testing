# 测试计划（Test Plan）
智慧校园访客预约与门禁管理系统

---

## 1. 引言

本测试计划用于指导智慧校园访客预约与门禁系统的整体测试工作，明确测试范围、目标、策略、资源、风险及交付物。本计划覆盖手工测试与自动化测试两个部分。

---

## 2. 测试目标

1. 验证访客预约、审批、门禁校验等核心业务流程是否正常工作。
2. 验证输入校验、时间窗口、黑名单校验等关键逻辑是否正确。
3. 通过测试设计方法（等价类、边界值、判定表）确保覆盖全面。
4. 发现、追踪并复现系统缺陷。
5. 编写关键流程的自动化测试脚本，实现部分回归测试能力。

---

## 3. 测试范围

### 3.1 在范围内（In Scope）
- 访客预约流程：表单输入、规则校验、记录创建
- 审批流程：状态流转（Pending → Approved / Rejected）
- 门禁校验：
  - 时间窗口判断
  - 黑名单校验
  - 状态校验
  - 访客码合法性校验
- 错误提示信息展示
- 简单的 E2E 流程：预约 → 审批 → 门禁验证

### 3.2 不在范围（Out of Scope）
- 多角色权限系统
- 持久化数据库（本项目使用内存模拟）
- 真正的二维码扫描
- 压力测试、性能测试
- 安全测试（SQL 注入等）

---

## 4. 测试策略

### 4.1 测试方式
- 黑盒测试为主
- 基于规则的功能测试（逻辑验证）
- 基于场景的 E2E 测试
- 部分自动化测试（Selenium）

### 4.2 测试设计方法
- 等价类划分
- 边界值分析
- 判定表（门禁判断规则）
- 场景法（整体流程）

---

## 5. 测试环境

| 环境项 | 内容 |
|-------|------|
| 操作系统 | Windows 10 / 11 |
| Python 版本 | 3.10+ |
| Web 框架 | Flask 3.0 |
| 浏览器 | Chrome |
| 浏览器驱动 | ChromeDriver（匹配版本） |
| 自动化框架 | Selenium + pytest |

---

## 6. 测试数据

### 6.1 典型有效数据
- 访客姓名：王小明
- 身份证号：123456789000112233
- 时间：未来时间段，如 `2025-12-01 10:00–11:00`

### 6.2 边界数据
- 时间正好等于开始/结束时间
- 身份证最短/最长合法长度
- 黑名单样例：张三

### 6.3 无效数据
- 空输入
- 结束时间早于开始时间
- 当前时间不在范围内

---

## 7. 测试交付物

- 测试计划（本文件）
- 测试设计文档（test_design.md）
- 手工测试用例（testcases/*.md）
- 缺陷报告（defects/*.md）
- 测试执行记录
- 自动化测试脚本（automation/*.py）

---

## 8. 风险

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 内存存储导致数据不可持久化 | 测试数据被重置 | 测试前重新输入数据 |
| 时间相关逻辑需要精确控制 | 容易出现误差 | 使用当前系统时间进行即时验证 |
| Selenium 自动化依赖浏览器版本 | 脚本可能失败 | 固定 ChromeDriver 版本 |

---

## 9. 退出准则（Exit Criteria）

- 所有高优先级缺陷已修复
- 中级及以下缺陷均记录并评估
- 手工测试用例执行通过率 ≥ 90%
- E2E 自动化脚本通过关键路径链路

---

